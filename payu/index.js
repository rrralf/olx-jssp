!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var s,i=e((function(e){
/*
	 * [js-sha512]{@link https://github.com/emn178/js-sha512}
	 *
	 * @version 0.8.0
	 * @author Chen, Yi-Cyuan [emn178@gmail.com]
	 * @copyright Chen, Yi-Cyuan 2014-2018
	 * @license MIT
	 */
!function(){var s="input is invalid type",i="object"==typeof window,r=i?window:{};r.JS_SHA512_NO_WINDOW&&(i=!1);var h=!i&&"object"==typeof self;!r.JS_SHA512_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=t:h&&(r=self);var a=!r.JS_SHA512_NO_COMMON_JS&&e.exports,n=!r.JS_SHA512_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),p=[-2147483648,8388608,32768,128],l=[24,16,8,0],d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],c=["hex","array","digest","arrayBuffer"],u=[];!r.JS_SHA512_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!n||!r.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var y=function(t,e){return function(s){return new v(e,!0).update(s)[t]()}},f=function(t){var e=y("hex",t);e.create=function(){return new v(t)},e.update=function(t){return e.create().update(t)};for(var s=0;s<c.length;++s){var i=c[s];e[i]=y(i,t)}return e},m=function(t,e){return function(s,i){return new b(s,e,!0).update(i)[t]()}},g=function(t){var e=m("hex",t);e.create=function(e){return new b(e,t)},e.update=function(t,s){return e.create(t).update(s)};for(var s=0;s<c.length;++s){var i=c[s];e[i]=m(i,t)}return e};function v(t,e){e?(u[0]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=u[16]=u[17]=u[18]=u[19]=u[20]=u[21]=u[22]=u[23]=u[24]=u[25]=u[26]=u[27]=u[28]=u[29]=u[30]=u[31]=u[32]=0,this.blocks=u):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],384==t?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):256==t?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):224==t?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=t,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}function b(t,e,i){var r,h=typeof t;if("string"!==h){if("object"!==h)throw new Error(s);if(null===t)throw new Error(s);if(n&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||n&&ArrayBuffer.isView(t)))throw new Error(s);r=!0}var a=t.length;if(!r){for(var o,p=[],l=(a=t.length,0),d=0;d<a;++d)(o=t.charCodeAt(d))<128?p[l++]=o:o<2048?(p[l++]=192|o>>6,p[l++]=128|63&o):o<55296||o>=57344?(p[l++]=224|o>>12,p[l++]=128|o>>6&63,p[l++]=128|63&o):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++d)),p[l++]=240|o>>18,p[l++]=128|o>>12&63,p[l++]=128|o>>6&63,p[l++]=128|63&o);t=p}t.length>128&&(t=new v(e,!0).update(t).array());var c=[],u=[];for(d=0;d<128;++d){var y=t[d]||0;c[d]=92^y,u[d]=54^y}v.call(this,e,i),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=i}v.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(s);if(null===t)throw new Error(s);if(n&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||n&&ArrayBuffer.isView(t)))throw new Error(s);e=!0}for(var r,h,a=0,o=t.length,p=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=p[16]=p[17]=p[18]=p[19]=p[20]=p[21]=p[22]=p[23]=p[24]=p[25]=p[26]=p[27]=p[28]=p[29]=p[30]=p[31]=p[32]=0),e)for(h=this.start;a<o&&h<128;++a)p[h>>2]|=t[a]<<l[3&h++];else for(h=this.start;a<o&&h<128;++a)(r=t.charCodeAt(a))<128?p[h>>2]|=r<<l[3&h++]:r<2048?(p[h>>2]|=(192|r>>6)<<l[3&h++],p[h>>2]|=(128|63&r)<<l[3&h++]):r<55296||r>=57344?(p[h>>2]|=(224|r>>12)<<l[3&h++],p[h>>2]|=(128|r>>6&63)<<l[3&h++],p[h>>2]|=(128|63&r)<<l[3&h++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++a)),p[h>>2]|=(240|r>>18)<<l[3&h++],p[h>>2]|=(128|r>>12&63)<<l[3&h++],p[h>>2]|=(128|r>>6&63)<<l[3&h++],p[h>>2]|=(128|63&r)<<l[3&h++]);this.lastByteIndex=h,this.bytes+=h-this.start,h>=128?(this.block=p[32],this.start=h-128,this.hash(),this.hashed=!0):this.start=h}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[32]=this.block,t[e>>2]|=p[3&e],this.block=t[32],e>=112&&(this.hashed||this.hash(),t[0]=this.block,t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=t[16]=t[17]=t[18]=t[19]=t[20]=t[21]=t[22]=t[23]=t[24]=t[25]=t[26]=t[27]=t[28]=t[29]=t[30]=t[31]=t[32]=0),t[30]=this.hBytes<<3|this.bytes>>>29,t[31]=this.bytes<<3,this.hash()}},v.prototype.hash=function(){var t,e,s,i,r,h,a,n,o,p,l,c,u,y,f,m,g,v,b,w,I,_,N,P,S,C=this.h0h,A=this.h0l,U=this.h1h,T=this.h1l,E=this.h2h,R=this.h2l,D=this.h3h,x=this.h3l,k=this.h4h,M=this.h4l,B=this.h5h,O=this.h5l,L=this.h6h,j=this.h6l,q=this.h7h,z=this.h7l,V=this.blocks;for(t=32;t<160;t+=2)e=((w=V[t-30])>>>1|(I=V[t-29])<<31)^(w>>>8|I<<24)^w>>>7,s=(I>>>1|w<<31)^(I>>>8|w<<24)^(I>>>7|w<<25),i=((w=V[t-4])>>>19|(I=V[t-3])<<13)^(I>>>29|w<<3)^w>>>6,r=(I>>>19|w<<13)^(w>>>29|I<<3)^(I>>>6|w<<26),w=V[t-32],I=V[t-31],o=((_=V[t-14])>>>16)+(w>>>16)+(e>>>16)+(i>>>16)+((n=(65535&_)+(65535&w)+(65535&e)+(65535&i)+((a=((N=V[t-13])>>>16)+(I>>>16)+(s>>>16)+(r>>>16)+((h=(65535&N)+(65535&I)+(65535&s)+(65535&r))>>>16))>>>16))>>>16),V[t]=o<<16|65535&n,V[t+1]=a<<16|65535&h;var J=C,F=A,H=U,W=T,G=E,K=R,Z=D,Q=x,$=k,X=M,Y=B,tt=O,et=L,st=j,it=q,rt=z;for(m=H&G,g=W&K,t=0;t<160;t+=8)e=(J>>>28|F<<4)^(F>>>2|J<<30)^(F>>>7|J<<25),s=(F>>>28|J<<4)^(J>>>2|F<<30)^(J>>>7|F<<25),i=($>>>14|X<<18)^($>>>18|X<<14)^(X>>>9|$<<23),r=(X>>>14|$<<18)^(X>>>18|$<<14)^($>>>9|X<<23),v=(p=J&H)^J&G^m,b=(l=F&W)^F&K^g,P=$&Y^~$&et,S=X&tt^~X&st,w=V[t],I=V[t+1],w=(o=((_=d[t])>>>16)+(w>>>16)+(P>>>16)+(i>>>16)+(it>>>16)+((n=(65535&_)+(65535&w)+(65535&P)+(65535&i)+(65535&it)+((a=((N=d[t+1])>>>16)+(I>>>16)+(S>>>16)+(r>>>16)+(rt>>>16)+((h=(65535&N)+(65535&I)+(65535&S)+(65535&r)+(65535&rt))>>>16))>>>16))>>>16))<<16|65535&n,I=a<<16|65535&h,_=(o=(v>>>16)+(e>>>16)+((n=(65535&v)+(65535&e)+((a=(b>>>16)+(s>>>16)+((h=(65535&b)+(65535&s))>>>16))>>>16))>>>16))<<16|65535&n,N=a<<16|65535&h,it=(o=(Z>>>16)+(w>>>16)+((n=(65535&Z)+(65535&w)+((a=(Q>>>16)+(I>>>16)+((h=(65535&Q)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n,rt=a<<16|65535&h,e=((Z=(o=(_>>>16)+(w>>>16)+((n=(65535&_)+(65535&w)+((a=(N>>>16)+(I>>>16)+((h=(65535&N)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n)>>>28|(Q=a<<16|65535&h)<<4)^(Q>>>2|Z<<30)^(Q>>>7|Z<<25),s=(Q>>>28|Z<<4)^(Z>>>2|Q<<30)^(Z>>>7|Q<<25),i=(it>>>14|rt<<18)^(it>>>18|rt<<14)^(rt>>>9|it<<23),r=(rt>>>14|it<<18)^(rt>>>18|it<<14)^(it>>>9|rt<<23),v=(c=Z&J)^Z&H^p,b=(u=Q&F)^Q&W^l,P=it&$^~it&Y,S=rt&X^~rt&tt,w=V[t+2],I=V[t+3],w=(o=((_=d[t+2])>>>16)+(w>>>16)+(P>>>16)+(i>>>16)+(et>>>16)+((n=(65535&_)+(65535&w)+(65535&P)+(65535&i)+(65535&et)+((a=((N=d[t+3])>>>16)+(I>>>16)+(S>>>16)+(r>>>16)+(st>>>16)+((h=(65535&N)+(65535&I)+(65535&S)+(65535&r)+(65535&st))>>>16))>>>16))>>>16))<<16|65535&n,I=a<<16|65535&h,_=(o=(v>>>16)+(e>>>16)+((n=(65535&v)+(65535&e)+((a=(b>>>16)+(s>>>16)+((h=(65535&b)+(65535&s))>>>16))>>>16))>>>16))<<16|65535&n,N=a<<16|65535&h,et=(o=(G>>>16)+(w>>>16)+((n=(65535&G)+(65535&w)+((a=(K>>>16)+(I>>>16)+((h=(65535&K)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n,st=a<<16|65535&h,e=((G=(o=(_>>>16)+(w>>>16)+((n=(65535&_)+(65535&w)+((a=(N>>>16)+(I>>>16)+((h=(65535&N)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n)>>>28|(K=a<<16|65535&h)<<4)^(K>>>2|G<<30)^(K>>>7|G<<25),s=(K>>>28|G<<4)^(G>>>2|K<<30)^(G>>>7|K<<25),i=(et>>>14|st<<18)^(et>>>18|st<<14)^(st>>>9|et<<23),r=(st>>>14|et<<18)^(st>>>18|et<<14)^(et>>>9|st<<23),v=(y=G&Z)^G&J^c,b=(f=K&Q)^K&F^u,P=et&it^~et&$,S=st&rt^~st&X,w=V[t+4],I=V[t+5],w=(o=((_=d[t+4])>>>16)+(w>>>16)+(P>>>16)+(i>>>16)+(Y>>>16)+((n=(65535&_)+(65535&w)+(65535&P)+(65535&i)+(65535&Y)+((a=((N=d[t+5])>>>16)+(I>>>16)+(S>>>16)+(r>>>16)+(tt>>>16)+((h=(65535&N)+(65535&I)+(65535&S)+(65535&r)+(65535&tt))>>>16))>>>16))>>>16))<<16|65535&n,I=a<<16|65535&h,_=(o=(v>>>16)+(e>>>16)+((n=(65535&v)+(65535&e)+((a=(b>>>16)+(s>>>16)+((h=(65535&b)+(65535&s))>>>16))>>>16))>>>16))<<16|65535&n,N=a<<16|65535&h,Y=(o=(H>>>16)+(w>>>16)+((n=(65535&H)+(65535&w)+((a=(W>>>16)+(I>>>16)+((h=(65535&W)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n,tt=a<<16|65535&h,e=((H=(o=(_>>>16)+(w>>>16)+((n=(65535&_)+(65535&w)+((a=(N>>>16)+(I>>>16)+((h=(65535&N)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n)>>>28|(W=a<<16|65535&h)<<4)^(W>>>2|H<<30)^(W>>>7|H<<25),s=(W>>>28|H<<4)^(H>>>2|W<<30)^(H>>>7|W<<25),i=(Y>>>14|tt<<18)^(Y>>>18|tt<<14)^(tt>>>9|Y<<23),r=(tt>>>14|Y<<18)^(tt>>>18|Y<<14)^(Y>>>9|tt<<23),v=(m=H&G)^H&Z^y,b=(g=W&K)^W&Q^f,P=Y&et^~Y&it,S=tt&st^~tt&rt,w=V[t+6],I=V[t+7],w=(o=((_=d[t+6])>>>16)+(w>>>16)+(P>>>16)+(i>>>16)+($>>>16)+((n=(65535&_)+(65535&w)+(65535&P)+(65535&i)+(65535&$)+((a=((N=d[t+7])>>>16)+(I>>>16)+(S>>>16)+(r>>>16)+(X>>>16)+((h=(65535&N)+(65535&I)+(65535&S)+(65535&r)+(65535&X))>>>16))>>>16))>>>16))<<16|65535&n,I=a<<16|65535&h,_=(o=(v>>>16)+(e>>>16)+((n=(65535&v)+(65535&e)+((a=(b>>>16)+(s>>>16)+((h=(65535&b)+(65535&s))>>>16))>>>16))>>>16))<<16|65535&n,N=a<<16|65535&h,$=(o=(J>>>16)+(w>>>16)+((n=(65535&J)+(65535&w)+((a=(F>>>16)+(I>>>16)+((h=(65535&F)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n,X=a<<16|65535&h,J=(o=(_>>>16)+(w>>>16)+((n=(65535&_)+(65535&w)+((a=(N>>>16)+(I>>>16)+((h=(65535&N)+(65535&I))>>>16))>>>16))>>>16))<<16|65535&n,F=a<<16|65535&h;o=(C>>>16)+(J>>>16)+((n=(65535&C)+(65535&J)+((a=(A>>>16)+(F>>>16)+((h=(65535&A)+(65535&F))>>>16))>>>16))>>>16),this.h0h=o<<16|65535&n,this.h0l=a<<16|65535&h,o=(U>>>16)+(H>>>16)+((n=(65535&U)+(65535&H)+((a=(T>>>16)+(W>>>16)+((h=(65535&T)+(65535&W))>>>16))>>>16))>>>16),this.h1h=o<<16|65535&n,this.h1l=a<<16|65535&h,o=(E>>>16)+(G>>>16)+((n=(65535&E)+(65535&G)+((a=(R>>>16)+(K>>>16)+((h=(65535&R)+(65535&K))>>>16))>>>16))>>>16),this.h2h=o<<16|65535&n,this.h2l=a<<16|65535&h,o=(D>>>16)+(Z>>>16)+((n=(65535&D)+(65535&Z)+((a=(x>>>16)+(Q>>>16)+((h=(65535&x)+(65535&Q))>>>16))>>>16))>>>16),this.h3h=o<<16|65535&n,this.h3l=a<<16|65535&h,o=(k>>>16)+($>>>16)+((n=(65535&k)+(65535&$)+((a=(M>>>16)+(X>>>16)+((h=(65535&M)+(65535&X))>>>16))>>>16))>>>16),this.h4h=o<<16|65535&n,this.h4l=a<<16|65535&h,o=(B>>>16)+(Y>>>16)+((n=(65535&B)+(65535&Y)+((a=(O>>>16)+(tt>>>16)+((h=(65535&O)+(65535&tt))>>>16))>>>16))>>>16),this.h5h=o<<16|65535&n,this.h5l=a<<16|65535&h,o=(L>>>16)+(et>>>16)+((n=(65535&L)+(65535&et)+((a=(j>>>16)+(st>>>16)+((h=(65535&j)+(65535&st))>>>16))>>>16))>>>16),this.h6h=o<<16|65535&n,this.h6l=a<<16|65535&h,o=(q>>>16)+(it>>>16)+((n=(65535&q)+(65535&it)+((a=(z>>>16)+(rt>>>16)+((h=(65535&z)+(65535&rt))>>>16))>>>16))>>>16),this.h7h=o<<16|65535&n,this.h7l=a<<16|65535&h},v.prototype.hex=function(){this.finalize();var t=this.h0h,e=this.h0l,s=this.h1h,i=this.h1l,r=this.h2h,h=this.h2l,a=this.h3h,n=this.h3l,p=this.h4h,l=this.h4l,d=this.h5h,c=this.h5l,u=this.h6h,y=this.h6l,f=this.h7h,m=this.h7l,g=this.bits,v=o[t>>28&15]+o[t>>24&15]+o[t>>20&15]+o[t>>16&15]+o[t>>12&15]+o[t>>8&15]+o[t>>4&15]+o[15&t]+o[e>>28&15]+o[e>>24&15]+o[e>>20&15]+o[e>>16&15]+o[e>>12&15]+o[e>>8&15]+o[e>>4&15]+o[15&e]+o[s>>28&15]+o[s>>24&15]+o[s>>20&15]+o[s>>16&15]+o[s>>12&15]+o[s>>8&15]+o[s>>4&15]+o[15&s]+o[i>>28&15]+o[i>>24&15]+o[i>>20&15]+o[i>>16&15]+o[i>>12&15]+o[i>>8&15]+o[i>>4&15]+o[15&i]+o[r>>28&15]+o[r>>24&15]+o[r>>20&15]+o[r>>16&15]+o[r>>12&15]+o[r>>8&15]+o[r>>4&15]+o[15&r]+o[h>>28&15]+o[h>>24&15]+o[h>>20&15]+o[h>>16&15]+o[h>>12&15]+o[h>>8&15]+o[h>>4&15]+o[15&h]+o[a>>28&15]+o[a>>24&15]+o[a>>20&15]+o[a>>16&15]+o[a>>12&15]+o[a>>8&15]+o[a>>4&15]+o[15&a];return g>=256&&(v+=o[n>>28&15]+o[n>>24&15]+o[n>>20&15]+o[n>>16&15]+o[n>>12&15]+o[n>>8&15]+o[n>>4&15]+o[15&n]),g>=384&&(v+=o[p>>28&15]+o[p>>24&15]+o[p>>20&15]+o[p>>16&15]+o[p>>12&15]+o[p>>8&15]+o[p>>4&15]+o[15&p]+o[l>>28&15]+o[l>>24&15]+o[l>>20&15]+o[l>>16&15]+o[l>>12&15]+o[l>>8&15]+o[l>>4&15]+o[15&l]+o[d>>28&15]+o[d>>24&15]+o[d>>20&15]+o[d>>16&15]+o[d>>12&15]+o[d>>8&15]+o[d>>4&15]+o[15&d]+o[c>>28&15]+o[c>>24&15]+o[c>>20&15]+o[c>>16&15]+o[c>>12&15]+o[c>>8&15]+o[c>>4&15]+o[15&c]),512==g&&(v+=o[u>>28&15]+o[u>>24&15]+o[u>>20&15]+o[u>>16&15]+o[u>>12&15]+o[u>>8&15]+o[u>>4&15]+o[15&u]+o[y>>28&15]+o[y>>24&15]+o[y>>20&15]+o[y>>16&15]+o[y>>12&15]+o[y>>8&15]+o[y>>4&15]+o[15&y]+o[f>>28&15]+o[f>>24&15]+o[f>>20&15]+o[f>>16&15]+o[f>>12&15]+o[f>>8&15]+o[f>>4&15]+o[15&f]+o[m>>28&15]+o[m>>24&15]+o[m>>20&15]+o[m>>16&15]+o[m>>12&15]+o[m>>8&15]+o[m>>4&15]+o[15&m]),v},v.prototype.toString=v.prototype.hex,v.prototype.digest=function(){this.finalize();var t=this.h0h,e=this.h0l,s=this.h1h,i=this.h1l,r=this.h2h,h=this.h2l,a=this.h3h,n=this.h3l,o=this.h4h,p=this.h4l,l=this.h5h,d=this.h5l,c=this.h6h,u=this.h6l,y=this.h7h,f=this.h7l,m=this.bits,g=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,s>>24&255,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,h>>24&255,h>>16&255,h>>8&255,255&h,a>>24&255,a>>16&255,a>>8&255,255&a];return m>=256&&g.push(n>>24&255,n>>16&255,n>>8&255,255&n),m>=384&&g.push(o>>24&255,o>>16&255,o>>8&255,255&o,p>>24&255,p>>16&255,p>>8&255,255&p,l>>24&255,l>>16&255,l>>8&255,255&l,d>>24&255,d>>16&255,d>>8&255,255&d),512==m&&g.push(c>>24&255,c>>16&255,c>>8&255,255&c,u>>24&255,u>>16&255,u>>8&255,255&u,y>>24&255,y>>16&255,y>>8&255,255&y,f>>24&255,f>>16&255,f>>8&255,255&f),g},v.prototype.array=v.prototype.digest,v.prototype.arrayBuffer=function(){this.finalize();var t=this.bits,e=new ArrayBuffer(t/8),s=new DataView(e);return s.setUint32(0,this.h0h),s.setUint32(4,this.h0l),s.setUint32(8,this.h1h),s.setUint32(12,this.h1l),s.setUint32(16,this.h2h),s.setUint32(20,this.h2l),s.setUint32(24,this.h3h),t>=256&&s.setUint32(28,this.h3l),t>=384&&(s.setUint32(32,this.h4h),s.setUint32(36,this.h4l),s.setUint32(40,this.h5h),s.setUint32(44,this.h5l)),512==t&&(s.setUint32(48,this.h6h),s.setUint32(52,this.h6l),s.setUint32(56,this.h7h),s.setUint32(60,this.h7l)),e},v.prototype.clone=function(){var t=new v(this.bits,!1);return this.copyTo(t),t},v.prototype.copyTo=function(t){var e=0,s=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(e=0;e<s.length;++e)t[s[e]]=this[s[e]];for(e=0;e<this.blocks.length;++e)t.blocks[e]=this.blocks[e]},b.prototype=new v,b.prototype.finalize=function(){if(v.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();v.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(t),v.prototype.finalize.call(this)}},b.prototype.clone=function(){var t=new b([],this.bits,!1);this.copyTo(t),t.inner=this.inner;for(var e=0;e<this.oKeyPad.length;++e)t.oKeyPad[e]=this.oKeyPad[e];return t};var w=f(512);w.sha512=w,w.sha384=f(384),w.sha512_256=f(256),w.sha512_224=f(224),w.sha512.hmac=g(512),w.sha384.hmac=g(384),w.sha512_256.hmac=g(256),w.sha512_224.hmac=g(224),a?e.exports=w:(r.sha512=w.sha512,r.sha384=w.sha384,r.sha512_256=w.sha512_256,r.sha512_224=w.sha512_224)}()})),r=e((function(t,e){e.__esModule=!0,e.PayU=void 0,function(t){var e=function(){this.errorCode="",this.statusCode=""};t.PayUResponse=e,t.payuParseResp=function(t){var e={};if(t.startsWith("<pre>")){var s=t.substring(5,t.length-6);s.startsWith("Array")?(e.ErrorCode="0",s.split("\n").forEach((function(t){var s=/\[(.*?)\]\s+=>\s+(.*?)$/.exec(t);s&&3==s.length&&(e[s[1]]=s[2])}))):(e.ErrorCode="101",e.Error=s)}else e.ErrorCode="100",e.Error="unknown answer";return e};var s=function(){function t(t,e,s){this._endpoint=t,this._merchantId=e,this._salt=s}return t.prototype._encodeQueryData=function(t){var e=[];for(var s in t){var i=t[s];e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}return e.join("&")},t.prototype.createInvoice=function(t){var s=this,r=JSON.stringify(t),h=this._merchantId+"|create_invoice|"+r+"|"+this._salt,a=i.sha512(h),n={key:this._merchantId,command:"create_invoice",hash:a,var1:r},o=this._encodeQueryData(n);return new Promise((function(i,r){var h=new e;h.transactionId=t.txnid,h.debugRequest=o,h.errorCode="0",h.statusCode="0";var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(4!==a.readyState)return;if(200!==a.status)throw new Error("Failed with status "+a.status+"; "+a.responseText);h.debugResponse=a.responseText;var t=JSON.parse(a.responseText);null!=t&&null!=t["Transaction Id"]?(h.statusCode="0",h.statusDescription=t.Status,h.transactionId=t["Transaction Id"],h.url=t.URL,h.email=t["Email Id"],h.phone=t.Phone):null!=t.msg?(h.errorCode="103",h.errorDescription=t.msg,h.statusCode="100"):(h.errorCode="104",h.errorDescription=t,h.statusCode="100"),i(h)}catch(t){h.errorCode="-1",h.errorDescription=t.message,r(h)}},a.open("POST",s._endpoint),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(o)}))},t.prototype.verifyInvoice=function(t){var s=this,r=t,h=this._merchantId+"|verify_payment|"+r+"|"+this._salt,a=i.sha512(h);console.log("Message hash"),console.log(h),console.log(a);var n={key:this._merchantId,command:"verify_payment",hash:a,var1:r},o=this._encodeQueryData(n);return new Promise((function(i,r){var h=new e;h.transactionId=t,h.debugRequest=o,h.errorCode="0";var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(4!==a.readyState)return;if(200!==a.status)throw new Error("Failed with status "+a.status+"; "+a.responseText);h.debugResponse=a.responseText,h.statusCode="0";var e=JSON.parse(a.responseText);if(null==e.status)h.errorCode="104",h.errorDescription="unknown",h.statusCode="100";else if(0==e.status)h.errorCode="103",h.statusCode="100",e.transaction_details&&e.transaction_details[t]?h.errorDescription=e.transaction_details[t].status:h.errorDescription=e.msg;else if(null!=e.transaction_details&&null!=e.transaction_details[t]){var s=e.transaction_details[t];h.statusDescription=s.status}i(h)}catch(t){h.errorCode="-1",h.errorDescription=t.message,r(h)}},a.open("POST",s._endpoint),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(o)}))},t}();t.PayUWrapper=s}(e.PayU||(e.PayU={}))}));(s=r)&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")&&s.default;var h=r.PayU;function a(t){return{transactionId:t.transactionId,statusCode:t.statusCode,statusDescription:t.statusDescription,url:t.url,email:t.email,phone:t.phone,errorCode:t.errorCode,errorDescription:t.errorDescription,debugRequest:t.debugRequest,debugResponse:t.debugResponse}}metadata={systemName:"PayU API",displayName:"PayU API",description:"PayU integration API",configuration:{EndpointUrl:{displayName:"PayU endpoint Url",type:"string",value:"https://test.payu.in/merchant/postservice.php?form=2"},MerchantId:{displayName:"PayU MerchantId",type:"string",value:"eekig4"},SALT:{displayName:"PayU Merchant SALT",type:"string",value:"KsnWno3F"},EMailTemplateId:{displayName:"PayU EMail Template Id",type:"string",value:"1449"},SMSTemplateId:{displayName:"PayU SMS Template Id",type:"string",value:"1448"},ValidationPeriod:{displayName:"PayU Validation Period",type:"string",value:"6"},DoSendSMS:{displayName:"PayU Send SMS on create_invoice",type:"string",value:"1"},DoSendEmail:{displayName:"PayU Send Email on create_invoice",type:"string",value:"1"}}},ondescribe=async function({configuration:t}){postSchema({objects:{PayU:{displayName:"PayU payment API",description:"PayU payment API",properties:{transactionId:{displayName:"transactionId",type:"string"},statusCode:{displayName:"statusCode",type:"string"},statusDescription:{displayName:"statusDescription",type:"string"},errorCode:{displayName:"errorCode",type:"string"},errorDescription:{displayName:"errorDescription",type:"string"},debugRequest:{displayName:"debugRequest",type:"string"},debugResponse:{displayName:"debugResponse",type:"string"},url:{displayName:"payment url",type:"string"},email:{displayName:"customer email",type:"string"},phone:{displayName:"customer phone",type:"string"},version:{displayName:"version",type:"string"},timeout:{displayName:"timeout (minutes)",type:"number"}},methods:{CreateInvoice:{displayName:"Create Invoice",type:"execute",parameters:{pTransactionId:{displayName:"pTransactionId",description:"Transaction Id",type:"string"},pProductInfo:{displayName:"pProductInfo",description:"This parameter should contain a brief product description. It should be a string describing the product",type:"string"},pAmount:{displayName:"pAmount",description:"Transaction amount",type:"string"},pFirstName:{displayName:"pFirstName",description:"first name of the customer",type:"string"},pLastName:{displayName:"pLastName",description:"last name of the customer",type:"string"},pEmail:{displayName:"pEmail",description:"email of the customer",type:"string"},pPhone:{displayName:"pPhone",description:"The phone number of the customer",type:"string"},pAddress1:{displayName:"pAddress1",description:"Address line #1",type:"string"},pCity:{displayName:"pCity",description:"City",type:"string"},pState:{displayName:"pState",description:"State",type:"string"},pCountry:{displayName:"pCountry",description:"Country",type:"string"},pZip:{displayName:"pZip",description:"ZIP Code",type:"string"}},requiredParameters:["pTransactionId","pProductInfo","pAmount","pFirstName","pEmail","pAddress1","pCity","pState","pCountry","pZip"],outputs:["transactionId","statusCode","statusDescription","errorCode","errorDescription","debugRequest","debugResponse","url","email","phone"]},VerifyInvoice:{displayName:"Verify Invoice",type:"execute",parameters:{pTransactionId:{displayName:"pTransactionId",description:"Transaction Id",type:"string"}},requiredParameters:["pTransactionId"],outputs:["transactionId","statusCode","statusDescription","errorCode","errorDescription","debugRequest","debugResponse","url","email","phone"]},GetTransactionId:{displayName:"Generate new transactionId",type:"read",parameters:{pLeadNumber:{displayName:"pLeadNumber",description:"Lead Number",type:"string"},pProductType:{displayName:"pProductType",description:"Type of product",type:"string"}},requiredParameters:["pLeadNumber","pProductType"],outputs:["transactionId"]},GetVersion:{displayName:"Get gateway version",type:"read",outputs:["version"]}}}}})},onexecute=async function({objectName:t,methodName:e,parameters:s,properties:i,configuration:r,schema:n}){try{switch(t){case"PayU":await async function(t,e,s,i){switch(t){case"CreateInvoice":await function(t,e){var s=e.EndpointUrl,i=e.MerchantId,r=e.SALT;let n={amount:t.pAmount,txnid:t.pTransactionId,productinfo:t.pProductInfo,firstname:t.pFirstName,lastname:t.pLastName,email:t.pEmail,phone:t.pPhone,address1:t.pAddress1,city:t.pCity,state:t.pState,country:t.pCountry,zipcode:t.pZip,template_id:e.EMailTemplateId,sms_template_id:e.SMSTemplateId,validation_period:e.ValidationPeriod,send_email_now:e.DoSendEmail,send_sms:e.DoSendSMS};return new Promise((t,e)=>{new h.PayUWrapper(s,i,r).createInvoice(n).then(e=>{console.log(e),postResult(a(e)),t()}).catch(t=>{console.log(t),postResult(a(t)),e(t)})})}(s,i);break;case"VerifyInvoice":await function(t,e){var s=e.EndpointUrl,i=e.MerchantId,r=e.SALT;let n=t.pTransactionId;return new Promise((t,e)=>{new h.PayUWrapper(s,i,r).verifyInvoice(n).then(e=>{console.log(e),postResult(a(e)),t()}).catch(t=>{console.log(t),postResult(a(t)),e(t)})})}(s,i);break;case"GetTransactionId":await function(t,e){return new Promise((e,s)=>{var i=t.pLeadNumber.toString(),r=t.pProductType.toString();i=i.substr(0,9).padStart(9,"0"),r=r.substr(0,4).padStart(4,"0");var h=function(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=s.length,r=0;r<t;r++)e+=s.charAt(Math.floor(Math.random()*i));return e}(7);"test123"==t.pLeadNumber.toString()&&(h="123456789");var a=`${i}${r}${h}`;a=(a=a.split("&").join("_")).split(" ").join("_"),postResult({transactionId:a}),e()})}(s);break;case"GetVersion":await new Promise((t,e)=>{postResult({version:"202011261204"})});break;default:throw new Error("The method "+t+" is not supported.")}}(e,0,s,r);break;default:throw new Error("The object "+t+" is not supported.")}}catch(t){postResult({statusCode:"Exception",statusDescription:t.message,errorCode:"Exception",errorDescription:t.stack})}}}();
//# sourceMappingURL=index.js.map
